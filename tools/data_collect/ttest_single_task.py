import numpy as np
import scipy.stats as stats

a = """
& -0.0006 &  0.0017 & -0.0018 &  0.0002 &  0.0000  & -0.0001
& 0.1097  &  0.2187 &  0.1272 &  0.1827 &  0.0949  &  0.1467
& 0.0443  &  0.2446 & -0.0621 &  0.1355 &  0.0964  &  0.0918
& -0.0079 &  0.0342 & -0.0103 & -0.0398 &  0.0039  & -0.0040 
& -0.0517 &  0.1452 &  0.2303 &  0.4313 & -0.0341  &  0.1442
& -0.0741 & -0.1113 &  0.0513 &  0.0258 &  0.0004  & -0.0216
"""

l = """
& -0.0002 &  0.0004  & -0.0004 &  0.0000  & -0.0002  & -0.0001
& -0.0841 &  0.1474  &  0.0804 &  0.0454  &  0.0000  &  0.0378
&  0.2741 &  0.2739  & -0.0384 &  0.0743  &  0.1481  &  0.1464
& -0.0080 &  0.0095  & -0.0100 &  0.0058  &  0.0136  &  0.0022
&  0.3220 &  0.0560  & -0.0255 &  0.2547  &  0.0650  &  0.1345 
&  0.0000 &  0.0002  &  0.0000 &  0.0032  &  0.0000  &  0.0007
"""

g = """
& -0.0172 & 0.0445 & 0.0233 & 0.0935 & 0.1945 &  0.0677
& 0.3098 &   0.2403 &   0.2324 &   0.1882 &   0.0698  &  0.2081
& 0.3780  & 0.3317  & 0.0064  & 0.2090  & 0.3315 &  0.2513 
&  0.0117 &   0.0453 &   -0.0093 &   -0.0031 &   -0.0112  &  0.0067
&  0.1416 &   0.1284 &   0.1104 &   0.1827 &   0.1386  &  0.1403
& -0.0001 &   0.055 &   0.0 &   0.0 &   0.0  &  0.011
"""

t = """
& 0.0199 & 0.0696 & 0.0594 & 0.0404 & -0.0875 & 0.0204
& -0.0601 &   0.1463 &   0.084 &   0.0112 &   0.0  &  0.0363 
& 0.1735 & 0.349 & 0.0785 & 0.2534 & 0.202 & 0.2113 
& -0.0031 &   0.0073 &   -0.0082 &   0.0 &   0.0019  &  -0.0004 
& -0.0126 &   0.3825 &   0.1482 &   -0.0014 &   0.01  &  0.1053
& -0.1267 &   0.082 &   0.025 &   0.1336 &   0.0008  &  0.0229
"""

all_ = """
&  0.0012 & 0.0091 &  0.0045 & -0.0062 & -0.0027 & 0.0012
&  0.0124 & 0.1351 &  0.1162 &  0.1353 &  0.0682 & 0.0934
&  0.3715 & 0.3551 & -0.1155 &  0.1266 &  0.2115 & 0.1898
& -0.0069 & 0.0045 &  0.0019 & -0.0003 &  0.0064 & 0.0011
&  0.1291 & 0.0164 &  0.0758 &  0.0402 & -0.105  & 0.0313
& -0.0577 & 0.1475 &  0.0062 &  0.0066 &  0.0148 & 0.0235
"""


def clean_data(data):
    data = data.strip("\n")
    lines = data.split("\n")
    data = [line.replace("&", ",").strip(",") for line in lines]
    data = [[float(num) for num in line.split(",")] for line in data]
    data_arr = np.array(data)
    return data_arr


def compute_p_value(modality1, modality2):
    p_value_list = []
    for i in range(6):
        t_stat, p_value = stats.ttest_rel(modality1[:, i], modality2[:, i])
        p_value_list.append(p_value)
    print(p_value_list)


def print_latex_table(modality1, modality2):
    for i in range(6):
        t_stat, p_value = stats.ttest_rel(modality1[:, i], modality2[:, i])
        print(f"{p_value:.6f} & ", end="")
    print()


a = clean_data(a)
l = clean_data(l)
g = clean_data(g)
t = clean_data(t)
all_ = clean_data(all_)

print_latex_table(all_, a)
print_latex_table(all_, l)
print_latex_table(all_, g)
print_latex_table(all_, t)

